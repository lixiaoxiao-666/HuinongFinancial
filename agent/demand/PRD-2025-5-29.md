# 需求说明文档 (PRD) - 数字惠农APP及OA后台管理系统

## 1. 文档信息

### 1.1 版本历史

| 版本号 | 日期       | 作者 | 变更说明                     |
| ------ | ---------- | ---- | ---------------------------- |
| V1.0   | YYYY-MM-DD | AI助手 | 初稿创建                     |

### 1.2 文档目的

本文档旨在明确"数字惠农APP"及配套"OA后台管理系统"的产品需求，作为产品设计、开发、测试和运营的指导依据，确保各方对产品有统一的理解和目标。

### 1.3 相关文档引用

- 产品路线图 (Roadmap): `../../Roadmap.md` (待创建)
- 用户故事地图 (User Story Map): `User_Story_Map.md` (待创建)
- Dify平台API文档 (如适用)
- 相关政策法规文件 (如适用)

## 2. 产品概述

### 2.1 产品名称与定位

- **产品名称**:
    - **面向用户端**: 数字惠农APP
    - **面向管理端**: 惠农OA后台管理系统
- **产品定位**:
    - **数字惠农APP**: 一站式智慧农业服务平台，为农民和农业相关从业者提供便捷的金融服务、农资服务、政策资讯、技术支持和生活服务。
    - **惠农OA后台管理系统**: 智能化农业服务管理与审批平台，通过与Dify AI工作流集成，实现贷款申请、农机租赁等业务的自动化、高效化审批与管理，并支撑数字惠农APP的各项后台运营需求。

### 2.2 产品愿景与使命

- **产品愿景**: 打造领先的数字农业生态服务体系，赋能乡村振兴，让农业更智慧，让农民更幸福。
- **产品使命**: 通过技术创新，整合多方资源，为农业生产者提供普惠、高效、便捷的综合服务，提升农业生产效率和农民生活品质，助力农业现代化发展。

### 2.3 价值主张与独特卖点(USP)

- **数字惠农APP**:
    - **一站式服务**: 集成贷款、租赁、资讯、医保、养老、补贴、专家、数字人民币、低保等多元化服务。
    - **智能便捷**: 简化申请流程，部分业务实现快速审批。
    - **精准推送**: 基于用户数据，提供个性化农业资讯和政策补贴信息。
    - **普惠金融**: 降低金融服务门槛，助力解决农民融资难问题。
- **惠农OA后台管理系统**:
    - **AI智能审批**: 结合Dify AI工作流，实现贷款、租赁等业务的自动化审批，提高效率，降低人工成本和风险。
    - **统一管理**: 集中管理APP用户数据、业务申请、服务内容等。
    - **数据驱动决策**: 提供数据分析能力，为业务优化和风险控制提供支持。
    - **流程透明化**: 审批流程可追溯，中高风险环节可人工介入。

### 2.4 目标平台列表

- **数字惠农APP**:
    - iOS
    - Android
    - 微信小程序 (可选，待进一步分析用户习惯和推广策略)
- **惠农OA后台管理系统**:
    - Web (PC端浏览器访问)

### 2.5 产品核心假设

- 目标用户群体对移动互联网应用有一定的使用基础和接受度。
- 通过AI赋能的自动化审批能显著提升业务处理效率和用户体验。
- 集成化的服务平台能有效吸引并留存用户。
- Dify平台的AI工作流能够稳定、可靠地处理审批逻辑。
- 后端系统能够安全、高效地处理与Dify平台的数据交互。

### 2.6 商业模式概述 (如适用)

- **初期**:
    - 通过提供免费的资讯、政策查询等基础服务吸引用户。
    - 对接金融机构，从贷款业务中获取服务费或佣金。
    - 对接农机租赁商，从租赁业务中获取服务费或佣金。
- **中期**:
    - 引入农资电商，从交易中获取抽成。
    - 提供付费的增值农业技术咨询服务。
    - 广告收入 (精准投放农业相关广告)。
- **长期**:
    - 构建农业大数据平台，提供数据服务。
    - 探索供应链金融等更深层次的金融服务。

## 3. 用户研究

### 3.1 目标用户画像 (详细)

#### 3.1.1 数字惠农APP用户

**画像一：李明 (个体农户)**

- **人口统计特征**:
    - 年龄：45岁
    - 性别：男
    - 地点：某省农村地区
    - 教育程度：初中
    - 职业：主要种植水稻和蔬菜，小规模养殖家禽
    - 家庭情况：已婚，有两个孩子，一个上中学，一个上小学
    - 收入水平：家庭年收入约5-8万元，主要依赖农业收成
- **行为习惯与偏好**:
    - 智能手机使用：会使用微信、短视频App，对新App学习速度一般。
    - 信息获取：主要通过村委会通知、电视、邻里交流、微信群获取农业信息和政策。
    - 金融服务：较少接触传统银行大额贷款，对小额、快速的贷款需求较高，担心手续复杂、审批慢。
    - 农机使用：农忙时会租用拖拉机、收割机，但信息不对称，有时找不到合适的农机。
- **核心需求与痛点**:
    - **需求**:
        - 方便快捷地申请小额贷款用于购买种子、化肥、农药。
        - 能够租到价格合理、状态良好的农机。
        - 及时了解最新的农业补贴政策和申请方法。
        - 获取针对性的病虫害防治技术指导。
        - 了解农产品市场价格行情。
    - **痛点**:
        - 贷款难、贷款慢、利息可能较高。
        - 租赁农机渠道少，价格不透明。
        - 农业技术知识匮乏，遇到问题求助无门。
        - 政策信息不对称，错过补贴机会。
- **动机与目标**:
    - 提高农业收入，改善家庭生活。
    - 降低生产成本，提高生产效率。
    - 学习新的农业技术，减少损失。

**画像二：王芳 (家庭农场主/合作社负责人)**

- **人口统计特征**:
    - 年龄：35岁
    - 性别：女
    - 地点：某市郊区，经营一家中等规模的有机蔬菜农场
    - 教育程度：大专 (农业相关专业)
    - 职业：农场经营者，负责生产、管理和销售
    - 家庭情况：已婚，一个孩子
    - 收入水平：农场年产值约50-100万元
- **行为习惯与偏好**:
    - 智能手机使用：熟练使用各类App，包括电商、金融、农业管理类App。
    - 信息获取：主动通过互联网、行业会议、专业书籍获取农业新技术、市场动态。
    - 金融服务：有较大额度的融资需求，用于扩大生产、采购设备，对贷款利率、审批效率有较高要求。
    - 农机使用：拥有部分农机，但部分大型或专用农机仍需租赁，关注农机性能和租赁服务。
- **核心需求与痛点**:
    - **需求**:
        - 获得额度较高、利率优惠的经营性贷款。
        - 高效管理农场的生产、库存和销售。
        - 对接高端销售渠道，提升产品附加值。
        - 引入先进的农业技术和管理经验。
        - 快速租赁到特定型号的农机设备。
    - **痛点**:
        - 融资渠道相对单一，审批流程仍有优化空间。
        - 市场信息多变，难以准确把握。
        - 农产品品牌建设和推广有难度。
- **动机与目标**:
    - 提升农场盈利能力和市场竞争力。
    - 实现标准化、规模化生产。
    - 打造农产品品牌，拓展销售市场。

#### 3.1.2 惠农OA后台管理系统用户

**画像一：张伟 (基层信贷审批员/农机租赁管理员)**

- **人口统计特征**:
    - 年龄：28岁
    - 性别：男
    - 地点：县级金融机构/农机服务站
    - 教育程度：本科 (金融/计算机相关)
    - 职业：负责贷款初审或农机租赁订单处理
- **行为习惯与偏好**:
    - 办公软件：熟练使用Office等办公软件，对信息化系统接受度高。
    - 工作模式：日常处理大量申请单据，重复性劳动较多。
- **核心需求与痛点**:
    - **需求**:
        - 快速获取申请人的完整资料和信用信息。
        - 系统能自动完成大部分标准化审批流程，减少手动操作。
        - 对于有风险的申请能及时预警，并提供清晰的指引进行人工审核。
        - 方便查询历史审批记录和管理租赁资源。
    - **痛点**:
        - 传统审批流程繁琐，效率低下，易出错。
        - 信息分散，需要查询多个系统。
        - 人工审核主观性强，标准不一。
- **动机与目标**:
    - 提高工作效率，减少加班。
    - 降低操作风险，保证审批质量。
    - 获得更好的职业发展。

**画像二：刘经理 (风控部门主管/运营经理)**

- **人口统计特征**:
    - 年龄：40岁
    - 性别：男
    - 地点：市级金融机构总部/区域农服中心
    - 教育程度：硕士 (金融/管理相关)
    - 职业：负责整体风险控制、业务流程优化和运营数据分析
- **行为习惯与偏好**:
    - 数据分析：关注业务数据，希望通过数据驱动决策。
    - 系统要求：对系统稳定性、安全性、可扩展性有较高要求。
- **核心需求与痛点**:
    - **需求**:
        - 实时监控业务风险，及时发现异常。
        - 灵活配置审批规则和AI模型参数。
        - 生成多维度数据报表，分析业务瓶颈和优化点。
        - 确保系统符合合规性要求。
        - 方便地对需要人工介入的审批进行管理和分配。
    - **痛点**:
        - 风险识别滞后，难以主动预防。
        - 审批规则调整不灵活，响应市场变化慢。
        - 缺乏全面的数据洞察，决策依赖经验。
- **动机与目标**:
    - 降低整体业务风险，提升资产质量。
    - 优化运营效率，提升客户满意度。
    - 支持业务创新和拓展。

### 3.2 用户场景分析

#### 3.2.1 核心使用场景详述

**场景1：个体农户李明申请小额农资贷款**

1.  **触发**: 春耕在即，李明需要购买化肥，但手头资金不足。
2.  **过程**:
    *   李明打开"数字惠农APP"，进入"贷款申请"模块。
    *   选择"农资贷"产品，查看产品介绍、利率、期限等信息。
    *   点击"立即申请"，系统引导填写个人基本信息（若首次使用，需先完成实名认证）、土地情况、预计购买农资类型和金额。
    *   部分信息（如信用情况）系统可自动从后台获取或引导用户授权查询。
    *   提交申请。
3.  **OA后台处理**:
    *   OA系统收到贷款申请。
    *   触发Dify AI工作流进行自动审批：
        *   AI工作流调用后端接口，获取李明的详细信息（实名状态、信用分数、历史借贷记录、当前是否有逾期、银行流水或等效财力证明等）。
        *   AI根据预设规则（如信用分大于X、无不良记录、申请金额在Y范围内等）进行评估。
        *   **低风险**: AI判断为低风险，自动审批通过。
        *   **中风险**: AI判断为中风险（例如，信息不完整或某项指标略低于标准），将申请转为"待人工审核"状态，并通知OA系统内的审批员张伟。张伟查看AI给出的风险提示点，补充核实信息后决定是否通过。
        *   **高风险**: AI判断为高风险（例如，信用记录差或有欺诈嫌疑），自动拒绝申请。
    *   AI工作流将审批结果（通过/拒绝/转人工）及原因（如适用）通过接口返回给OA后台。
4.  **结果**:
    *   OA系统更新申请状态，并将结果通过APP推送消息告知李明。
    *   若通过，告知贷款额度、利率、放款方式等，引导李明确认用款。
    *   若拒绝，告知拒绝原因。
    *   若转人工，告知预计审核时间。

**场景2：家庭农场主王芳租赁一台联合收割机**

1.  **触发**: 水稻即将成熟，王芳需要一台联合收割机进行收割。
2.  **过程**:
    *   王芳打开"数字惠农APP"，进入"农机租赁"模块。
    *   根据农机类型、使用时间、地点等筛选可租赁的联合收割机。
    *   查看农机详情（型号、性能参数、价格、用户评价、农机主信息等）。
    *   选择合适的农机，提交租赁请求（选择租赁时长、确认价格）。
3.  **OA后台处理**:
    *   OA系统收到农机租赁请求。
    *   触发Dify AI工作流进行初步处理：
        *   AI工作流调用后端接口，获取王芳的认证信息、信用情况以及所选农机的实时库存状态、农机主设定的租赁条件。
        *   AI根据规则（如用户信用良好、农机当前可租、符合农机主条件等）进行判断。
        *   **库存充足且符合条件**: AI判断为低风险，自动确认订单，通知农机主备机，并提示王芳支付押金。
        *   **需协调/中风险**: 若农机主设置需要人工确认，或库存紧张，或用户有特殊需求，转为"待人工处理"，通知OA系统管理员（或农机主）。
        *   **不符合条件/高风险**: 若用户信用不佳或农机不可租，自动取消请求。
    *   AI工作流将处理结果返回给OA后台。
4.  **结果**:
    *   OA系统更新请求状态，通过APP消息告知王芳。
    *   若成功，引导支付押金，生成租赁合同。
    *   若失败，告知原因。

**场景3：审批员张伟处理中风险贷款申请**

1.  **触发**: OA后台管理系统提示有新的"待人工审核"贷款申请。
2.  **过程**:
    *   张伟登录OA系统，进入"贷款审批 - 人工审核列表"。
    *   选择一条申请，查看申请详情、AI给出的风险点和建议。
    *   根据需要，可能通过系统内工具联系申请人补充材料或进行电话核实。
    *   综合判断后，在系统中给出"通过"、"拒绝"或"补充材料后重审"的决定，并填写审批意见。
3.  **结果**:
    *   系统记录张伟的审批结果和意见。
    *   将最终结果通过APP告知申请人。
    *   若通过，则进入后续放款流程。

#### 3.2.2 边缘使用场景考量

- 用户在无网络或弱网络环境下提交申请。
- 用户中途退出申请流程。
- Dify AI工作流调用超时或失败。
- 后端接口异常，导致AI工作流无法获取完整审批信息。
- 用户对审批结果有异议，需要申诉。
- 政策信息、农业资讯内容更新不及时或有误。
- 数字人民币支付/收款失败。

### 3.3 用户调研洞察 (如适用)

*(此部分待真实用户调研后填充，目前可基于常识和经验进行初步假设)*

- 许多农民对线上金融服务仍有顾虑，担心信息安全和操作复杂性。
- 对农业技术和市场信息的需求非常迫切，但现有渠道信息质量参差不齐。
- 政策补贴的知晓度和申请成功率有待提高。
- 对本地化的服务和支持有较强依赖。

## 4. 产品功能需求

### 4.1 功能架构与模块划分

```mermaid
graph TD
    A[数字惠农APP] --> A1[用户中心]
    A1 --> A1a[注册/登录]
    A1 --> A1b[实名认证]
    A1 --> A1c[我的资料]
    A1 --> A1d[我的申请]
    A1 --> A1e[消息通知]
    A1 --> A1f[设置]

    A --> A2[金融服务]
    A2 --> A2a[贷款申请]
    A2 --> A2b[我的贷款]
    A2 --> A2c[还款管理]

    A --> A3[农机服务]
    A3 --> A3a[农机租赁]
    A3 --> A3b[我的租赁订单]

    A --> A4[农业资讯]
    A4 --> A4a[政策速递]
    A4 --> A4b[农技知识]
    A4 --> A4c[市场行情]

    A --> A5[便民服务]
    A5 --> A5a[惠农医保查询/指引]
    A5 --> A5b[养老金查询/指引]
    A5 --> A5c[农业补贴查询/申请指引]
    A5 --> A5d[低保服务查询/指引]

    A --> A6[专家服务]
    A6 --> A6a[农技专家库]
    A6 --> A6b[在线咨询入口 (可选)]

    A --> A7[数字人民币专区]
    A7 --> A7a[推广与开通指引]
    A7 --> A7b[支付场景集成 (可选)]

    B[惠农OA后台管理系统] --> B1[用户管理模块]
    B1 --> B1a[APP用户列表]
    B1 --> B1b[用户详情查看]
    B1 --> B1c[用户标签管理]

    B --> B2[贷款审批模块]
    B2 --> B2a[贷款申请列表]
    B2 --> B2b[AI自动审批监控]
    B2 --> B2c[人工审核工作台]
    B2 --> B2d[审批规则配置 (部分)]
    B2 --> B2e[放款管理对接]

    B --> B3[农机租赁管理模块]
    B3 --> B3a[租赁请求列表]
    B3 --> B3b[AI处理监控]
    B3 --> B3c[人工处理工作台]
    B3 --> B3d[农机资源管理]
    B3 --> B3e[租赁订单管理]

    B --> B4[内容管理模块]
    B4 --> B4a[农业资讯发布]
    B4 --> B4b[政策信息管理]
    B4 --> B4c[专家信息管理]

    B --> B5[Dify集成管理模块]
    B5 --> B5a[AI工作流调用日志]
    B5 --> B5b[接口状态监控]
    B5 --> B5c[审批参数配置 (与Dify协同)]

    B --> B6[系统管理模块]
    B6 --> B6a[OA用户权限管理]
    B6 --> B6b[操作日志]
    B6 --> B6c[数据字典]

    C[后端服务] --> A
    C --> B
    C --> D[Dify AI平台]
    D --> C

    E[数据库] --> C
```

### 4.2 核心功能详述

#### 4.2.1 [数字惠农APP - 贷款申请模块]

-   **功能描述**:
    *   作为 [有资金需求的农户/农业经营者], 我想要 [在APP上便捷地提交贷款申请], 以便 [快速获得生产经营所需资金]。
    *   作为 [APP用户], 我想要 [查看不同贷款产品的详细信息（利率、额度、期限、申请条件）], 以便 [选择最适合我的贷款产品]。
    *   作为 [APP用户], 我想要 [在申请过程中获得清晰的指引，并能方便地上传所需材料], 以便 [顺利完成申请]。
    *   作为 [APP用户], 我想要 [实时查看我的贷款申请审批进度], 以便 [及时了解申请状态]。
-   **用户价值**: 解决农民融资难、融资慢的问题，提供便捷、透明的贷款申请渠道。
-   **功能逻辑与规则**:
    1.  **产品展示**: 列出合作金融机构提供的各类贷款产品（如农资贷、农机贷、经营贷等）。
    2.  **信息填写**:
        *   引导用户选择贷款产品，填写申请金额、期限等。
        *   根据产品要求，收集用户信息（个人身份信息、家庭信息、农业生产信息、财务信息等）。
        *   支持OCR识别身份证、银行卡等，简化输入。
        *   支持在线签署授权协议（如征信查询授权）。
    3.  **材料上传**: 支持拍照上传或本地文件上传（如土地承包合同、收入证明等）。
    4.  **申请提交**: 提交前进行表单校验，确保信息完整性。提交后生成申请单号。
    5.  **状态跟踪**: 用户可在"我的申请"中查看申请的当前状态（审核中、已通过、已拒绝、待补充材料、已放款等）。
    6.  **消息通知**: 审批状态变更时，通过APP内消息和短信（可选）通知用户。
    7.  **与OA后台交互**:
        *   APP提交申请数据到后端服务。
        *   后端服务将申请信息推送给OA后台管理系统。
        *   OA后台调用Dify AI工作流进行审批。
        *   OA后台接收AI审批结果，更新申请状态，并通过后端服务同步给APP。
-   **交互要求**:
    *   流程清晰，步骤引导明确。
    *   信息输入便捷，减少用户手动输入。
    *   进度反馈及时、透明。
-   **数据需求**:
    *   用户基本信息、认证信息、贷款申请信息、上传材料、审批状态、审批意见、贷款合同信息。
-   **技术依赖**:
    *   OCR识别服务。
    *   电子签章服务 (可选)。
    *   短信通知服务 (可选)。
    *   后端服务接口。
-   **验收标准**:
    *   用户可以成功浏览、选择贷款产品。
    *   用户可以完整填写并成功提交贷款申请，所有必填项均有校验。
    *   用户上传的材料能够正确关联到申请单。
    *   用户可以实时查看到准确的申请审批状态。
    *   贷款申请信息能准确无误地传递到OA后台。
    *   OA后台的审批结果能及时准确地反馈到APP端。

#### 4.2.2 [数字惠农APP - 农机租赁模块]

-   **功能描述**:
    *   作为 [需要使用农机的农户/农业经营者], 我想要 [在APP上搜索和浏览可租赁的农机信息], 以便 [找到符合我需求的农机]。
    *   作为 [APP用户], 我想要 [查看农机的详细信息（型号、性能、价格、位置、可租时间、用户评价）], 以便 [做出租赁决策]。
    *   作为 [APP用户], 我想要 [方便地提交农机租赁请求并支付押金/租金], 以便 [快速预定农机]。
    *   作为 [APP用户], 我想要 [查看我的农机租赁订单状态和详情], 以便 [管理我的租赁事务]。
-   **用户价值**: 解决农机供需信息不对称问题，提供便捷的农机租赁渠道，提高农机利用率。
-   **功能逻辑与规则**:
    1.  **农机展示**:
        *   列表/地图模式展示附近或指定区域的可用农机。
        *   支持按农机类型、品牌、作业类型、租赁时间等条件筛选和排序。
    2.  **农机详情**: 展示农机图片、型号、规格参数、归属（个人/合作社/企业）、定位、租赁价格（时租/日租/亩租）、农机主联系方式（确认订单后可见）、用户评价等。
    3.  **租赁请求**:
        *   用户选择农机，选择租赁起止时间/作业面积，系统计算预估费用。
        *   提交租赁请求。
    4.  **订单确认与支付**:
        *   请求发送给OA后台（或直接给农机主，取决于系统设计）。
        *   OA后台（或农机主确认后通过OA）反馈确认结果。
        *   用户收到确认后，在线支付押金或全款租金（支持数字人民币支付）。
    5.  **订单管理**: 用户可在"我的租赁订单"中查看订单状态（待确认、待支付、待使用、使用中、已完成、已取消）。
    6.  **消息通知**: 订单状态变更时，通过APP内消息通知用户。
    7.  **与OA后台交互**:
        *   APP提交租赁请求到后端服务。
        *   后端服务将请求信息推送给OA后台管理系统。
        *   OA后台（可能结合Dify AI）进行初步处理或直接流转给农机主/管理员。
        *   OA后台更新订单状态，并通过后端服务同步给APP。
-   **交互要求**:
    *   农机搜索和筛选方便快捷。
    *   农机信息展示清晰全面。
    *   租赁流程简单易懂。
-   **数据需求**:
    *   农机信息（类型、品牌、型号、参数、图片、定位、所有者信息、价格、可租状态、评价）、用户租赁请求信息、订单信息、支付信息。
-   **技术依赖**:
    *   地图服务 (用于展示农机位置)。
    *   在线支付接口 (包括数字人民币)。
    *   后端服务接口。
-   **验收标准**:
    *   用户可以成功搜索、筛选、浏览农机信息。
    *   用户可以提交农机租赁请求，包含正确的租赁时间、地点、农机选择。
    *   用户可以接收到租赁请求的确认/拒绝状态。
    *   用户可以完成租赁订单的在线支付。
    *   用户可以查看到自己所有租赁订单的准确状态。
    *   租赁请求能准确无误地传递到OA后台。

#### 4.2.3 [惠农OA后台管理系统 - 贷款审批模块 (含Dify AI集成)]

-   **功能描述**:
    *   作为 [OA系统管理员/审批员], 我想要 [在一个集中的地方查看所有通过APP提交的贷款申请], 以便 [统一管理和跟踪]。
    *   作为 [OA系统], 我想要 [在收到新的贷款申请时自动调用Dify AI工作流进行审批], 以便 [提高审批效率和一致性]。
    *   作为 [审批员], 我想要 [清晰地看到AI审批的结果和给出的风险提示], 以便 [对中高风险申请进行有效的人工审核]。
    *   作为 [OA系统管理员], 我想要 [能够配置部分审批规则和参数，并监控AI工作流的运行状态], 以便 [优化审批流程和保证系统稳定]。
-   **用户价值**: 实现贷款审批的自动化和智能化，大幅提升审批效率，降低人工成本，规范审批流程，有效控制风险。
-   **功能逻辑与规则**:
    1.  **申请接收与列表**:
        *   实时接收从APP后端服务推送过来的贷款申请数据。
        *   以列表形式展示申请（申请人、申请产品、金额、时间、当前状态：待AI审批、AI审批中、待人工审核、人工审核中、已通过、已拒绝等）。
        *   支持按多种条件查询、筛选、排序申请。
    2.  **Dify AI工作流调用**:
        *   **触发**: 新申请到达或特定状态变更时，OA系统自动触发。
        *   **数据准备**: OA系统准备调用Dify AI工作流所需的输入数据，包括但不限于：
            *   申请人基本信息（ID、姓名、证件号）。
            *   申请信息（贷款产品代码、申请金额、期限、用途）。
            *   从内部数据库查询到的补充信息（用户在本平台的历史行为数据、已认证信息等）。
            *   需要AI评估的关键字段（如信用评分、实名状态、账户余额等，这些信息可能需要OA后端先从自身数据库或其他系统获取）。
        *   **接口调用**: OA系统通过API调用Dify平台上预设的"贷款审批AI工作流"。
            *   传递请求ID，以便追踪。
        *   **Dify AI工作流内部逻辑 (示例)**:
            1.  **接收请求**: Dify工作流接收到OA传来的审批请求数据。
            2.  **信息获取/校验**:
                *   调用OA系统提供的回调接口，根据申请人ID、申请ID等，从OA后端数据库获取更详细的、实时校验的审批所需信息（如最新的信用评分、是否实名、账户余额、黑名单校验结果等）。 *这是关键的交互点，Dify需要能回调后端接口获取数据*。
            3.  **规则判断/模型评分**:
                *   根据预设的规则引擎（例如：IF 信用分 < 600 THEN 高风险; IF 申请金额 > 年收入*0.5 THEN 中风险）。
                *   或调用内部/外部的评分模型。
            4.  **风险等级判定**: 输出低、中、高风险等级。
            5.  **结果输出**: 将审批结果（风险等级、主要风险点说明、建议操作：直接通过/转人工/直接拒绝）通过API回调给OA系统指定的接口。
    3.  **AI审批结果处理**:
        *   OA系统接收Dify AI工作流返回的审批结果。
        *   更新贷款申请的状态（例如，低风险 -> AI审批通过；中风险 -> 待人工审核；高风险 -> AI审批拒绝）。
        *   记录AI给出的风险描述和建议。
    4.  **人工审核工作台**:
        *   "待人工审核"的申请会进入此列表。
        *   审批员可查看申请详情、客户资料、AI给出的风险点和分析依据。
        *   提供审批操作按钮（通过、拒绝、补充材料、转更高权限审批等）。
        *   审批员填写审批意见。
    5.  **状态同步与通知**:
        *   OA系统的最终审批结果（无论是AI自动的还是人工的）会通过后端服务同步给数字惠农APP，并通知用户。
        *   若审批通过，可能触发后续的合同生成、放款对接流程。
    6.  **规则配置与监控 (部分)**:
        *   提供界面供管理员查看和调整部分简单的、非核心的审批规则参数（例如，某个风险阈值的微调，复杂的规则和模型仍在Dify平台维护）。
        *   监控Dify AI工作流的调用成功率、平均处理时长、异常日志等。
-   **交互要求**:
    *   审批列表信息清晰，状态明确。
    *   AI审批结果和人工审核界面信息展示直观，便于决策。
    *   与Dify平台的交互日志可查。
-   **数据需求**:
    *   贷款申请全量数据、AI审批输入参数、AI审批输出结果（风险等级、原因代码、描述）、人工审批记录、审批规则配置项、Dify接口调用日志。
-   **技术依赖**:
    *   与后端服务的稳定接口。
    *   与Dify AI平台的API对接能力（发起调用和接收回调）。
    *   内部数据库支持。
-   **验收标准**:
    *   新的贷款申请能被OA系统正确接收。
    *   OA系统能根据新申请自动、准确地调用Dify AI贷款审批工作流，并传递必要的参数。
    *   OA系统能正确接收并解析Dify AI工作流返回的审批结果（低风险、中风险、高风险及相关信息）。
    *   根据AI返回结果，申请状态能自动流转：低风险申请自动标记为"已通过"；中风险申请自动进入"待人工审核"列表；高风险申请自动标记为"已拒绝"。
    *   审批员可以在人工审核工作台清晰看到申请详情和AI给出的风险点。
    *   审批员可以成功完成人工审核操作，并记录审批意见。
    *   最终审批结果能准确同步回APP端。
    *   Dify AI工作流调用失败或超时有合理的重试或告警机制。
    *   Dify AI工作流回调OA后端接口获取审批信息时，OA后端能正确响应并提供所需数据。

#### 4.2.4 [惠农OA后台管理系统 - 农机租赁管理模块 (含Dify AI辅助)]

-   **功能描述**:
    *   作为 [OA系统管理员/农机主], 我想要 [管理通过APP提交的农机租赁请求], 以便 [高效处理订单，调配农机资源]。
    *   作为 [OA系统], 我想要 [对于某些租赁请求，可选择调用Dify AI工作流进行初步的条件校验和风险评估], 以便 [快速筛选和处理简单请求]。
-   **用户价值**: 提高农机租赁订单处理效率，优化农机资源分配。
-   **功能逻辑与规则**: (与贷款审批类似，但AI介入程度可能不同，可能更多是规则校验和辅助决策)
    1.  **租赁请求接收与列表**: 接收APP租赁请求，列表展示。
    2.  **Dify AI工作流调用 (可选/辅助)**:
        *   **触发**: 新租赁请求到达。
        *   **数据准备**: 用户信息、租赁农机信息、租赁时间、农机库存状态（OA从数据库获取）。
        *   **接口调用**: 调用Dify AI"农机租赁初步校验工作流"。
        *   **Dify AI工作流内部逻辑 (示例)**:
            1.  接收请求。
            2.  调用OA后端接口获取实时农机库存、用户信用简报。
            3.  规则判断（如：用户信用是否达标、农机是否可租、时间是否冲突等）。
            4.  输出校验结果（建议直接确认/建议人工处理/不满足条件）。
        *   **结果处理**: OA接收AI建议，对于"建议直接确认"的，可半自动处理或提示管理员一键确认；其他则进入人工处理流程。
    3.  **人工处理工作台**: 管理员/农机主处理租赁请求，确认/拒绝订单，协调农机。
    4.  **农机资源管理**: 管理农机信息、状态、价格、租赁日历等。
    5.  **订单管理**: 跟踪订单全流程状态。
-   **交互要求**: 订单信息清晰，处理流程顺畅。
-   **数据需求**: 租赁请求数据、AI校验结果、人工处理记录、农机主数据、农机数据。
-   **技术依赖**: 与后端服务接口、与Dify AI平台接口。
-   **验收标准**:
    *   租赁请求能被正确接收和展示。
    *   （若启用AI）AI能对租赁请求进行初步校验并给出建议。
    *   管理员/农机主能有效处理租赁订单。
    *   订单状态能准确同步回APP。

### 4.3 次要功能描述

-   **数字惠农APP - 用户中心**:
    -   注册/登录 (手机号+验证码，微信授权登录)。
    -   实名认证 (对接公安部接口或第三方认证服务)。
    -   我的资料管理 (头像、昵称、收货地址等)。
    -   我的申请/订单统一入口。
    -   消息通知中心 (系统通知、业务通知)。
    -   设置 (修改密码、隐私设置、关于我们、版本更新)。
-   **数字惠农APP - 农业资讯**:
    -   分类展示 (政策、农技、市场)。
    -   详情页图文展示。
    -   搜索、收藏、分享功能。
-   **数字惠农APP - 便民服务入口**:
    -   惠农医保、养老金、农业补贴、低保服务：主要为相关政策解读、官方办理渠道指引、所需材料清单等静态信息展示，或跳转至相应政府服务网站/小程序。
-   **数字惠农APP - 农技专家**:
    -   专家列表展示 (领域、简介、联系方式 - 经授权)。
    -   简单的按领域筛选专家。
-   **数字惠农APP - 数字人民币专区**:
    -   数字人民币知识科普。
    -   引导用户开通数字人民币钱包 (跳转至银行APP或运营机构推广页)。
    -   在支付环节（如贷款还款、租赁支付）提供数字人民币支付选项（需对接相应支付网关）。
-   **惠农OA后台管理系统 - 用户管理**: 查看APP注册用户信息，进行简单管理（如冻结账户）。
-   **惠农OA后台管理系统 - 内容管理**: 发布和管理APP内农业资讯、政策信息、专家信息等。
-   **惠农OA后台管理系统 - 系统管理**: OA账号权限分配、操作日志审计。

### 4.4 未来功能储备 (Backlog)

-   **数字惠农APP**:
    -   农产品上行通道 (对接电商平台或自建轻量级集采预售)。
    -   农业保险服务对接。
    -   在线农技问答社区/付费咨询。
    -   精准气象服务。
    -   土地流转信息平台。
    -   乡村旅游推广。
    -   集成化的农场ERP管理工具 (针对家庭农场/合作社)。
-   **惠农OA后台管理系统**:
    -   更精细化的用户画像分析与营销推送工具。
    -   更复杂的自定义审批流配置。
    -   与更多第三方金融机构、农服机构的API对接。
    -   基于大数据的风险预警模型。
    -   移动端OA (方便管理员随时随地处理事务)。

## 5. 用户流程与交互设计指导

### 5.1 核心用户旅程地图

**旅程1: 李明 (个体农户) - 申请农资贷款**

| 阶段       | 用户行为 (APP)                                     | 用户情绪/想法                                  | 痛点/机会点                                     | 系统支持 (APP/OA/Dify)                                                                                                |
| :--------- | :------------------------------------------------- | :--------------------------------------------- | :---------------------------------------------- | :-------------------------------------------------------------------------------------------------------------------- |
| **需求产生** | 春耕缺钱买化肥                                       | 焦虑，希望能快点借到钱                         | 传统渠道慢                                      | -                                                                                                                     |
| **发现了解** | 听说村里推广"数字惠农APP"可以贷款                    | 好奇，有点怀疑                                 | 需要简单易懂的介绍                              | APP推广，清晰的产品介绍                                                                                               |
| **下载注册** | 下载APP，手机号注册，完成实名认证                    | 步骤有点多，但为了贷款能接受                   | 简化注册认证流程，提供帮助引导                  | APP：流畅的注册认证流程，OCR辅助                                                                                      |
| **产品选择** | 进入贷款模块，浏览"农资贷"，查看利率期限             | 信息挺全，但利率能不能再低点？                 | 提供利率对比，透明化费用                        | APP：清晰的贷款产品列表和详情                                                                                         |
| **信息填写** | 填写申请金额，个人信息，上传土地证明等               | 有些信息记不清，拍照上传有点麻烦               | 预填信息，简化材料，优化上传体验                | APP：智能表单，OCR，清晰的材料指引                                                                                    |
| **提交等待** | 提交申请，看到"审核中"                             | 紧张，不知道能不能通过，要等多久？             | 明确告知预计审核时间，提供进度查询              | APP：实时进度反馈；OA+Dify：快速AI审批                                                                                  |
| **结果获取** | 收到APP通知"贷款已通过"，看到额度和放款信息          | 开心，效率真高！                               | -                                               | APP：及时通知；OA：审批结果同步                                                                                       |
| **用款还款** | 确认用款，按期还款                                   | 方便，希望能有还款提醒                         | 提供便捷还款渠道和提醒                          | APP：还款管理，还款提醒                                                                                               |

### 5.2 关键流程详述与状态转换图

**流程1：贷款申请及AI审批流程**

```mermaid
stateDiagram-v2
    [*] --> APP_用户提交申请
    APP_用户提交申请 --> OA_接收申请 : 数据传入后端，再到OA
    OA_接收申请 --> OA_调用Dify_AI审批 : 准备数据，发起API调用
    OA_调用Dify_AI审批 --> Dify_AI处理中 : Dify工作流执行
    Dify_AI处理中 --> Dify_回调OA获取信息 : 如需实时数据
    Dify_回调OA获取信息 --> Dify_AI处理中 : OA提供数据后继续
    Dify_AI处理中 --> OA_接收AI结果 : Dify回调API返回结果
    OA_接收AI结果 --> डिसीजन{AI结果?}
    डिसीजन--> OA_低风险_自动通过 : AI判定低风险
    OA_低风险_自动通过 --> APP_通知用户_通过
    APP_通知用户_通过 --> [*]
    डिसीजन--> OA_高风险_自动拒绝 : AI判定高风险
    OA_高风险_自动拒绝 --> APP_通知用户_拒绝
    APP_通知用户_拒绝 --> [*]
    डिसीजन--> OA_中风险_转人工 : AI判定中风险
    OA_中风险_转人工 --> OA_人工审核工作台
    OA_人工审核工作台 --> OA_人工审批操作
    OA_人工审批操作 --> डिसीजन2{人工结果?}
    डिसीजन2 --> APP_通知用户_通过 : 人工审批通过
    डिसीजन2 --> APP_通知用户_拒绝 : 人工审批拒绝
    APP_通知用户_通过 --> [*]
    APP_通知用户_拒绝 --> [*]
```

### 5.3 对前端设计师 (UI/UX Agent) 的界面原型参考说明和要求

-   **数字惠农APP**:
    -   **首页**: 简洁明了，突出核心服务入口（贷款、租赁、资讯、惠农服务），可考虑宫格或列表布局。顶部可设置banner推广。
    -   **贷款/租赁申请表单**: 分步式填写，每步信息不宜过多。输入框标签清晰，必要时提供填写示例或帮助说明。材料上传界面操作便捷，支持预览。
    -   **进度展示**: 使用时间轴或状态步骤条清晰展示申请/订单的当前进展。
    -   **资讯列表与详情**: 参考主流新闻APP的布局，保证阅读体验。
    -   **整体风格**: 亲切、友好、可靠，符合农村用户审美和使用习惯，字体可稍大，图标表意清晰。避免过于复杂或时尚的设计。
-   **惠农OA后台管理系统**:
    -   **布局**: 采用经典的后台管理系统左右布局（左侧导航菜单，右侧内容区）。
    -   **列表页**: 表格信息展示清晰，支持排序、筛选、分页。关键操作按钮醒目。
    -   **详情/审批页**: 信息分区展示，AI给出的风险点和建议要突出显示。审批操作按钮明确。
    -   **数据可视化**: 对于统计报表，采用合适的图表（折线图、柱状图、饼图等）清晰展示数据。
    -   **整体风格**: 专业、高效、严谨。注重信息层级和操作便捷性。

### 5.4 交互设计规范与原则建议 (如适用)

-   **一致性**: 整体操作流程、界面元素、文案风格保持一致。
-   **反馈性**: 用户每一步操作都应有及时、明确的反馈。
-   **容错性**: 提供撤销、修改等功能，对于重要操作前进行确认提醒。防止用户误操作。
-   **易学性**: 界面简洁直观，减少用户学习成本。对于复杂功能提供引导。
-   **高效性**: 优化操作路径，减少不必要的步骤，提高用户完成任务的效率。

## 6. 非功能需求

### 6.1 性能需求

-   **APP端**:
    -   启动时间：冷启动 < 3s，热启动 < 1s。
    -   页面加载时间：核心页面 < 2s。
    -   列表滑动流畅，无明显卡顿。
    -   API请求响应时间：95%的请求 < 1s。
-   **OA后台**:
    -   页面加载时间：列表页 < 3s，详情页 < 2s。
    -   复杂查询响应时间：< 5s。
    -   并发用户数：初期支持至少50个并发操作用户。
-   **Dify AI工作流调用**:
    -   OA调用Dify接口超时时间：建议设置在10-30秒（需评估Dify工作流平均执行时长）。
    -   Dify回调OA接口超时时间：Dify平台侧应有设置。OA提供给Dify的接口响应时间应 < 500ms。
-   **稳定性**:
    -   APP及OA系统可用性 > 99.9%。
    -   Dify AI工作流服务稳定性由Dify平台保障，OA侧需做好异常处理和熔断降级。

### 6.2 安全需求

-   **数据传输安全**: 全程使用HTTPS加密传输。敏感数据（如身份证号、银行卡号）在传输和存储时应进行加密处理。
-   **数据存储安全**: 数据库密码、密钥等敏感配置信息加密存储。定期数据备份。
-   **用户认证与授权**:
    -   APP端采用手机验证码、密码（可选）、生物识别（可选）等多因素认证。
    -   OA后台采用用户名密码登录，关键操作可引入二次验证（如动态口令）。
    -   严格的权限控制，用户只能访问其被授权的资源和功能。
-   **隐私保护**:
    -   遵循国家个人信息保护法规，明确告知用户数据收集和使用范围，获取用户授权。
    -   用户敏感数据脱敏展示。
-   **防攻击策略**:
    -   防止常见的Web攻击，如XSS、CSRF、SQL注入等。
    -   接口防刷、防暴力破解。
    -   对Dify回调接口进行来源验证和签名校验，确保请求合法性。
-   **Dify交互安全**:
    -   OA系统调用Dify AI工作流时，使用安全的认证方式（如API Key/Token），并对API Key/Token进行妥善保管。
    -   Dify平台回调OA系统接口时，OA系统需验证请求来源的合法性（例如通过IP白名单、请求签名等机制）。

### 6.3 可用性与可访问性标准

-   **易用性**:
    -   界面符合用户操作习惯，流程顺畅。
    -   提供清晰的操作指引和帮助文档。
    -   错误提示友好且能指导用户解决问题。
-   **可访问性**:
    -   APP端兼顾老年用户群体，提供字体大小调整功能。
    -   关键操作有语音提示或震动反馈 (可选)。
    -   Web端 (OA) 尽量遵循WCAG 2.1 A或AA级别标准。

### 6.4 合规性要求

-   符合《中华人民共和国网络安全法》、《中华人民共和国个人信息保护法》等相关法律法规。
-   金融服务部分需遵循银保监会等金融监管机构的相关规定。
-   涉及支付的部分需符合支付清算协会的规定。

### 6.5 数据统计与分析需求

-   **数字惠农APP**:
    -   用户行为数据：日活(DAU)、月活(MAU)、新增用户、用户留存率、页面访问路径、功能使用频率、平均使用时长。
    -   业务数据：贷款申请数、通过率、放款金额；农机租赁订单数、成交额。
    -   关键事件埋点：注册、登录、实名认证完成、贷款申请提交、租赁下单、资讯阅读等。
-   **惠农OA后台管理系统**:
    -   审批效率：AI自动审批通过率、拒绝率、转人工率；人工审批平均时长。
    -   业务风险指标：各产品逾期率（对接贷后数据后）、高风险申请占比。
    -   运营数据：各渠道用户来源分析、各类资讯点击率。
-   **Dify AI工作流交互**:
    -   调用次数、成功率、失败率、平均响应时间。
    -   AI审批各风险等级分布。

## 7. 技术架构考量

### 7.1 技术栈建议 (如适用，或提出约束条件)

-   **后端**: 主流Java (Spring Boot/Cloud) 或 Python (Django/FastAPI) 或 Node.js (Express/NestJS) 框架。
-   **数字惠农APP**:
    -   Native: iOS (Swift/Objective-C), Android (Kotlin/Java)。体验更佳，性能更好。
    -   Cross-platform: React Native, Flutter。开发效率高，一套代码多端复用。根据团队技术储备和对性能体验的要求选择。
    -   微信小程序: 原生小程序语法或Taro/uni-app等框架。
-   **惠农OA后台管理系统 (Web)**:
    -   前端: Vue.js (Element Plus/Ant Design Vue) 或 React (Ant Design/Material UI)。
-   **数据库**: MySQL, PostgreSQL。可考虑NoSQL数据库 (如MongoDB) 用于存储非结构化数据或日志。
-   **缓存**: Redis。
-   **消息队列**: RabbitMQ, Kafka (用于系统间异步通信和任务解耦)。
-   **Dify集成**: 通过其提供的RESTful API进行HTTP(S)调用。

### 7.2 系统集成需求

-   **与Dify AI平台集成**:
    -   OA系统作为客户端调用Dify的AI工作流API。
    -   OA系统需提供回调接口供Dify AI工作流在处理过程中获取额外数据或返回处理结果。
-   **与第三方服务集成**:
    -   公安部实名认证服务。
    -   银行/金融机构的征信查询接口、贷款业务接口、数字人民币支付接口。
    -   短信服务商接口。
    -   地图服务商API。
    -   OCR服务商API。
    -   电子签章服务商API。
-   **内部系统集成**: (如果现有其他相关系统)

### 7.3 技术依赖与约束

-   **Dify平台**:
    -   依赖Dify平台的稳定性、可用性和API版本兼容性。
    -   Dify AI工作流的设计和维护能力。
    -   Dify平台的回调机制必须可靠，支持超时和重试配置。
-   **网络连通性**: OA系统与Dify平台之间、OA系统与APP后端之间的网络必须稳定畅通。
-   **数据一致性**: 跨系统调用时，需考虑分布式事务或最终一致性方案。
-   **接口安全性**: 所有对外暴露的API接口必须有严格的安全校验。

### 7.4 数据模型建议 (关键实体的属性和关系)

*(仅列出核心实体及关键属性，详细设计需数据库设计阶段完成)*

-   **User (用户信息)**: UserID, Username, PasswordHash, Mobile, WechatOpenID, RealName, IDCardNo, IsRealNameVerified, UserType (农户/农场主/合作社), RegistrationDate, Status (Active/Frozen), Profile (头像、昵称等), LocationInfo.
-   **LoanApplication (贷款申请)**: ApplicationID, UserID, ProductID, AmountRequested, LoanTerm, Purpose, ApplicationDate, Status (PendingAI, AIEvaluating, PendingManual, ManualEvaluating, Approved, Rejected, Disbursed, Repaid), AIRiskLevel, AIComments, ManualReviewerID, ManualReviewComments, ApprovalDate, DisbursementDate. (关联User)
-   **LoanProduct (贷款产品)**: ProductID, ProductName, MinAmount, MaxAmount, MinTerm, MaxTerm, InterestRate, EligibilityCriteria, RequiredDocuments.
-   **MachineRentalRequest (农机租赁请求)**: RequestID, UserID, MachineID, StartTime, EndTime, EstimatedCost, RequestDate, Status (PendingConfirmation, Confirmed, Paid, InUse, Completed, Cancelled), PaymentID. (关联User, Machine)
-   **Machine (农机信息)**: MachineID, OwnerUserID, MachineType, Brand, Model, Description, Location, RentalPricePerHour/Day, AvailabilityStatus, Photos.
-   **DifyWorkflowLog (Dify调用日志)**: LogID, WorkflowName, RequestID (关联LoanApplicationID或MachineRentalRequestID), RequestTimestamp, RequestPayload, ResponseTimestamp, ResponsePayload, Status (Success/Fail), ErrorMessage.
-   **Article (资讯文章)**: ArticleID, Title, Content, Category (政策/农技/市场), Author, PublishDate, ViewCount.
-   **OaUser (OA后台用户)**: OaUserID, Username, PasswordHash, RoleID, Email.
-   **Role (OA角色)**: RoleID, RoleName, Permissions (JSON).

---
请注意，文件名中的 "YYYY-MM-DD" 需要您手动替换为当前日期。
后续我将根据您的反馈和这份PRD，继续创建产品路线图 (Roadmap) 和用户故事地图 (User Story Map)。
如果您对PRD初稿有任何修改意见或需要补充的内容，请随时提出。特别是关于之前提问环节中尚未明确的细节，如果现在有答案，可以补充进来，使PRD更加完善。 