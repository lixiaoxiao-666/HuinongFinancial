# 数字惠农后端模拟数据使用说明

## 📁 文件清单

本目录包含以下模拟数据相关文件：

- `mock_data.sql` - 基础模拟数据（系统配置、用户、贷款、审批等）
- `mock_data_part2.sql` - 业务模拟数据（农机、专家、文章、订单等）
- `import_mock_data.bat` - Windows一键导入脚本
- `README_模拟数据.md` - 本说明文档

## 🚀 快速开始

### 1. 自动导入（推荐）

**Windows用户：**
```cmd
cd backend/configs
import_mock_data.bat
```

**Linux/macOS用户：**
```bash
cd backend/configs
# 修改脚本中的数据库连接信息
mysql -h10.10.10.10 -P4000 -uroot app < mock_data.sql
mysql -h10.10.10.10 -P4000 -uroot app < mock_data_part2.sql
```

### 2. 手动导入

```bash
# 1. 登录数据库
mysql -h10.10.10.10 -P4000 -uroot

# 2. 选择数据库
USE app;

# 3. 导入基础数据
SOURCE mock_data.sql;

# 4. 导入业务数据
SOURCE mock_data_part2.sql;
```

## 📊 数据统计

成功导入后，各表记录数量如下：

| 表名 | 记录数 | 说明 |
|------|--------|------|
| system_configs | 10 | 系统配置 |
| oa_roles | 6 | 后台角色 |
| oa_users | 6 | 后台用户 |
| users | 5 | 普通用户 |
| user_auths | 6 | 用户认证 |
| user_tags | 10 | 用户标签 |
| loan_products | 5 | 贷款产品 |
| loan_applications | 4 | 贷款申请 |
| approval_logs | 10 | 审批日志 |
| dify_workflow_logs | 4 | AI工作流日志 |
| categories | 6 | 文章分类 |
| experts | 6 | 专家信息 |
| articles | 5 | 文章内容 |
| machines | 6 | 农机设备 |
| rental_orders | 5 | 租赁订单 |
| user_sessions | 5 | 用户会话 |
| file_uploads | 7 | 文件上传 |
| offline_queue | 5 | 离线队列 |
| api_logs | 8 | API日志 |

## 👥 测试账号

### 普通用户账号

| 手机号 | 姓名 | 用户类型 | 认证状态 | 说明 |
|--------|------|----------|----------|------|
| 13900000001 | 李大牛 | 农户 | 全部认证 | 有贷款记录，信用良好 |
| 13900000002 | 王二麻子 | 农户 | 实名+银行卡 | 有机械租赁记录 |
| 13900000003 | 张合作社 | 合作社 | 实名认证 | 有贷款申请被拒记录 |
| 13900000004 | 刘企业 | 企业 | 全部认证 | 企业用户 |
| 13900000005 | 陈小花 | 农户 | 仅实名 | 女性用户 |

### 后台管理员账号

| 用户名 | 邮箱 | 角色 | 部门 | 说明 |
|--------|------|------|------|------|
| admin | admin@huinong.com | 超级管理员 | 技术部 | 系统管理员 |
| loan001 | loan.manager@huinong.com | 贷款经理 | 业务部 | 贷款业务管理 |
| risk001 | risk.manager@huinong.com | 风控经理 | 风控部 | 风险评估 |
| machine001 | machine.manager@huinong.com | 农机管理员 | 农机部 | 农机设备管理 |
| content001 | content.manager@huinong.com | 内容管理员 | 运营部 | 内容管理 |
| service001 | service@huinong.com | 客服专员 | 客服部 | 客户服务 |

**注意：** 所有账号的密码都是经过bcrypt加密的，对应明文密码需要查看Go代码中的测试配置。

## 📋 业务场景数据

### 贷款业务

- **5个贷款产品**：小额贷、农机贷、合作社贷、企业贷、季节性贷
- **4个贷款申请**：包含已批准、待审批、已拒绝、已放款等各种状态
- **10条审批日志**：完整的审批流程记录
- **4条AI工作流日志**：Dify平台集成记录

### 农机租赁

- **6台农机设备**：拖拉机、收割机、播种机、喷药机、旋耕机、无人机
- **5个租赁订单**：包含已完成、进行中、已确认等状态
- **地理位置数据**：覆盖山东、河南、江苏、安徽、湖北等省份

### 内容管理

- **6个文章分类**：政策资讯、技术指导、市场信息、金融服务、农机设备、行业新闻
- **5篇示例文章**：涵盖各个分类的优质内容
- **6位专家**：农艺师、植保专家、农机专家、畜牧专家、经济师、园艺专家

### 系统数据

- **系统配置**：应用参数、限制配置、业务规则等
- **用户会话**：包含移动端和Web端的登录会话
- **文件上传**：身份证、申请材料、农机图片、文章配图等
- **API日志**：真实的API调用记录
- **离线队列**：异步任务处理记录

## 🔧 数据特点

### 1. 真实性
- 所有数据都基于真实的农业金融业务场景
- 地理位置使用真实的省市县信息
- 农机品牌和型号参考市场主流产品
- 专家信息参考真实的农业机构

### 2. 完整性
- 覆盖系统所有核心功能模块
- 包含完整的业务流程数据
- 数据之间关联关系正确
- 各种业务状态都有覆盖

### 3. 多样性
- 包含不同类型的用户（农户、合作社、企业）
- 涵盖不同的业务场景（贷款、租赁、咨询）
- 包含成功和失败的业务案例
- 覆盖不同的地理区域

## ⚠️ 注意事项

### 1. 安全提醒
- **仅用于开发和测试环境**
- **严禁在生产环境使用**
- **包含敏感信息（身份证号等）仅为测试用**

### 2. 数据库要求
- MySQL 5.7+ 或兼容数据库
- 确保数据库结构已通过 `app.sql` 创建
- 建议在空数据库中导入

### 3. 依赖关系
- 必须先导入 `mock_data.sql` 基础数据
- 再导入 `mock_data_part2.sql` 业务数据
- 导入顺序不能颠倒

### 4. 数据更新
- 模拟数据中的时间戳使用 `NOW()` 函数
- 每次导入时会生成当前时间
- 时间相关的业务逻辑需要注意

## 🔍 测试建议

### API测试
```bash
# 1. 用户登录
POST /api/v1/auth/login
{"phone": "13900000001", "password": "password123"}

# 2. 获取贷款产品
GET /api/v1/loans/products

# 3. 搜索附近农机
GET /api/v1/machines?lat=36.654321&lng=117.123456&radius=50

# 4. 获取文章列表
GET /api/v1/articles?category=policy&page=1
```

### 功能测试
1. **用户认证流程**：注册、登录、实名认证
2. **贷款申请流程**：产品选择、申请提交、审批处理
3. **农机租赁流程**：设备搜索、订单创建、支付确认
4. **内容浏览**：文章阅读、专家咨询、政策查询

## 📞 技术支持

如果在使用模拟数据过程中遇到问题：

1. 检查数据库连接配置
2. 确认SQL文件完整性
3. 查看导入过程中的错误信息
4. 验证数据库表结构是否正确

---

**最后更新：** 2025年5月30日  
**版本：** 1.0.0  
**作者：** 数字惠农开发团队 